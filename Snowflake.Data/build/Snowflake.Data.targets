<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <ItemGroup Condition="$([MSBuild]::IsOSPlatform('Windows'))">
    <NativeLibrary Include="$(MSBuildThisFileDirectory)..\runtimes\win-x64\native\*.dll" Condition="'$(Platform)' == 'x64' Or '$(PlatformTarget)' == 'x64'" />
    <NativeLibrary Include="$(MSBuildThisFileDirectory)..\runtimes\win-arm64\native\*.dll" Condition="'$(Platform)' == 'ARM64' Or '$(PlatformTarget)' == 'ARM64'" />
    <NativeLibrary Include="$(MSBuildThisFileDirectory)..\runtimes\win-x86\native\*.dll" Condition="'$(Platform)' == 'x86' Or '$(PlatformTarget)' == 'x86'" />
  </ItemGroup>

  <Target Name="CopyMiniCoreNativeLibraries" BeforeTargets="Build">
    <Copy SourceFiles="@(NativeLibrary)" DestinationFolder="$(OutputPath)" SkipUnchangedFiles="true" Condition="'@(NativeLibrary)' != ''" />
  </Target>
</Project>
