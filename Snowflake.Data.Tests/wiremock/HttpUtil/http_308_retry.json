{
    "mappings": [
        {
            "scenarioName": "HTTP 308 retry",
            "requiredScenarioState": "Started",
            "newScenarioState": "Query attempt with HTTP 308 response",
            "request": {
                "urlPathPattern": "/queries/v1/query-request.*",
                "method": "POST"
            },
            "response": {
                "status": 308,
                "headers": {
                    "Location": "/temp-redirect-1"
                }
            }
        },
        {
            "scenarioName": "HTTP 308 retry",
            "requiredScenarioState": "Query attempt with HTTP 308 response",
            "newScenarioState": "308 redirect followed and times out",
            "request": {
                "urlPathPattern": "/temp-redirect-1",
                "method": "POST"
            },
            "response": {
                "fixedDelayMilliseconds": 20000
            }
        },
        {
            "scenarioName": "HTTP 308 retry",
            "requiredScenarioState": "308 redirect followed and times out",
            "newScenarioState": "Retry attempt successful",
            "request": {
                "urlPathPattern": "/queries/v1/query-request.*",
                "method": "POST"
            },
            "response": {
                "status": 200,
                "jsonBody": {
                    "data": {
                        "queryId": "http_308_retry_queryId"
                    },
                    "code": null,
                    "message": null,
                    "success": true
                }
            }
        }
    ]
}
